<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Presupuesto</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            color: #000;
        }
        .right-align {
            text-align: right;
        }
        .center-align {
            text-align: center;
        }
        .terms {
            font-size: 8pt;
            color: #3d3d3d;
            background-color: #ffffff;
        }
        table {
            width: 100%;
            color: rgb(8, 8, 8);
            border-collapse: collapse;
            border: solid rgb(251, 249, 249);
        }
        th, td {
            border: solid rgb(251, 249, 249);
            padding: 8px;
        }
        .highlight {
            color: red;
            font-size: 12px;
            width: 600px;
            margin: 0 auto;
            text-align: center;
        }
    </style>
</head>
<body>
    <script>
        function getQueryParam(param) {
            const params = new URLSearchParams(window.location.search);
            return params.has(param) ? params.get(param) : "---";
        }

        document.addEventListener("DOMContentLoaded", function() {
            var nombre_comercial = getQueryParam("nombre_comercial");
            document.getElementById("nombre_comercial").textContent = nombre_comercial;
            var fecha = getQueryParam("fecha");
            document.getElementById("fecha").textContent = fecha;
            
            var foto_logo = getQueryParam("foto_logo");
            try {
                var fotoLogoObj = JSON.parse(foto_logo);
                document.getElementById("foto_logo").src = fotoLogoObj.Url;
            } catch (e) {
                document.getElementById("foto_logo").src = foto_logo;
            }

            var precio_3meses = getQueryParam("precio_3meses");
            document.getElementById("precio_3meses").textContent = precio_3meses;
            var precio_mes4_mes12 = getQueryParam("precio_mes4_mes12");
            document.getElementById("precio_mes4_mes12").textContent = precio_mes4_mes12;
            var precio_despues_ofertas = getQueryParam("precio_despues_ofertas");
            document.getElementById("precio_despues_ofertas").textContent = precio_despues_ofertas;
            var total_descuentos = getQueryParam("total_descuentos");
            document.getElementById("total_descuentos").textContent = total_descuentos;
            var nombre_fiscal = getQueryParam("nombre_fiscal");
            document.getElementById("nombre_fiscal").textContent = nombre_fiscal;
            var nif = getQueryParam("nif");
            document.getElementById("nif").textContent = nif;
            var tienda_direccion = getQueryParam("tienda_direccion");
            document.getElementById("tienda_direccion").textContent = tienda_direccion;
            var mail = getQueryParam("mail");
            document.getElementById("mail").textContent = mail;
            var tienda = getQueryParam("tienda");
            document.getElementById("tienda").textContent = tienda;
            var tienda_telefono = getQueryParam("tienda_telefono");
            document.getElementById("tienda_telefono").textContent = tienda_telefono;
            var direccion_completa = getQueryParam("direccion_completa");
            document.getElementById("direccion_completa").textContent = direccion_completa;

            // Función para abrir ventana de impresión
            window.print();
        });
    </script>

    <p class="right-align">
        <img id="foto_logo" src="" alt="Logo" style="max-height: 50px;">
    </p>
    <hr>
    <p class="right-align">
        <span style="font-size:10pt;" id="fecha"></span>
    </p>
    <p><strong><span style="font-size:11pt;">Hola <span id="nombre_comercial"></span></span></strong></p>
    <p class="right-align compact-text"><span style="font-size:10pt;">Esta oferta durante los 3 primeros meses tendrá un precio de <span id="precio_3meses"></span></span></p>
    <p class="right-align compact-text"><span style="font-size:10pt;">Del mes 4 al mes 12 será de <span id="precio_mes4_mes12"></span></span></p>
    <p class="right-align compact-text"><span style="font-size:10pt;">y después de las ofertas <strong><span style="font-size:10pt;" id="precio_despues_ofertas"></span></strong></span></p>
    <p class="right-align compact-text"><span style="font-size:10pt;" id="total_descuentos"></span></p>

    <h2><strong><span style="font-size:10pt;">A continuación, te detallamos las características del producto consultado:</span></strong></h2>
    <table>
        <tr>
            <td style="width: 21.6443%;"><span style="font-size:8pt;"><<Start: [Related Servicios]>></span></td>
            <td style="width: 78.3557%;"><span id="servicios"></span></td>
        </tr>
        <tr>
            <td style="width: 21.6443%;"><span style="font-size:8pt;"><<imagen>></span><span style="font-size:11pt;" id="terminal"></span></td>
            <td style="width: 78.3557%;">
                <p><strong><span style="font-size:10pt;" id="modelo"></span></strong></p>
                <p><span style="font-size:9pt;" id="condiciones_terminal"></span></p>
            </td>
        </tr>
        <tr>
            <td style="width: 21.6443%;"><span style="font-size:8pt;"><<Start: [Related Servicios añadidos]>><<Imagen>> <<Foto terminal>></span></td>
            <td style="width: 78.3557%;">
                <p><strong><span style="font-size:10pt;"><<Ref>></span></strong></p>
                <p><span style="font-size:9pt;"><<Incluye>></span></p>
                <p><strong><span style="font-size:10pt;"><<Modelo>></span></strong></p>
                <p><span style="font-size:9pt;"><<Condiciones terminal>></span></p>
            </td>
        </tr>
    </table>

    <p class="terms">TÉRMINOS Y CONDICIONES DE PROTECCIÓN DE DATOS</p>
    <p class="terms">Los datos facilitados a través del formulario serán tratados por el responsable del tratamiento <span id="nombre_fiscal"></span>., con <span id="nif"></span>, <span id="tienda_direccion"></span></p>
    <p class="terms">Atendiendo a su petición de solicitud de presupuesto, sus datos serán tratados con la finalidad de información sobre productos y servicios de nuestras ofertas por cualquier medio, electrónico y no electrónico.</p>
    <p class="terms">Puede retirar su consentimiento al envío de nuevas comunicaciones comerciales, de forma gratuita, enviando un correo electrónico a <span id="mail"></span>.</p>
    <p class="terms">Los datos deberán ser veraces, exactos y actualizados. No está permitido que se comuniquen falsos datos, salvo obligación legal o necesidad necesaria para la consecución de las finalidades antes indicadas.</p>
    <p class="terms">Conservará sus datos mientras no retire su consentimiento, asimismo puede ejercer sus derechos de acceso, rectificación, oposición, supresión limitación al tratamiento y portabilidad, mediante el envío de una solicitud o correo electrónico a las direcciones antes indicadas.</p>
    <p class="terms">Si lo estima oportuno, puede presentar una reclamación ante la AEPD.</p>
    <p class="terms">En caso de que tenga alguna duda respecto al tratamiento de sus datos puede contactar con nuestro Delegado de Protección de Datos por correo electrónico en las direcciones de correo antes indicadas.</p>

    <p><span style="color:#1f1f1f;background-color:#ffffff;font-size:8pt;">*</span><span style="color:#3d3d3d;background-color:#ffffff;font-size:8pt;">Oferta válida durante el período de vigencia de la promoción aplicada.</span></p>
    <p class="right-align compact-text"><strong><span style="font-size:12pt;">&nbsp; &nbsp; &nbsp;</span></strong><strong><span style="font-size:11pt;">CLIENTE&nbsp;</span></strong><strong><span style="font-size:12pt;">&nbsp; &nbsp; &nbsp; &nbsp;</span></strong></p>
    <p><strong><span style="font-size:11pt;" id="tienda"></span></strong></p>
    <p><span style="font-size:10pt;" id="tienda_telefono"></span></p>
    <p><span style="font-size:10pt;" id="direccion_completa"></span></p>
</body>
</html>
